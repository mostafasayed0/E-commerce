import './polyfills.server.mjs';
import{a as S}from"./chunk-P67OCK2U.mjs";import"./chunk-QZLY374Y.mjs";import{a as R,b as _,c as T,d as b,f as y,g as P,h as V,i as q,j as L,l as N}from"./chunk-X2ORDFNS.mjs";import{k as E}from"./chunk-2F7VE6JV.mjs";import{Gb as d,Hb as F,Oa as l,Ob as v,W as C,_ as h,eb as m,ia as g,ib as u,ja as f,mb as s,qb as o,rb as n,sb as c,vb as x,xb as w,yb as p}from"./chunk-AK2TQKSJ.mjs";import"./chunk-VVCT4QZE.mjs";function I(t,r){t&1&&(o(0,"div",8)(1,"p",9),d(2,"This Filed Is Required"),n()())}function A(t,r){t&1&&(o(0,"div",8)(1,"p",9),d(2,"Enter Valid Mail"),n()())}function G(t,r){if(t&1&&m(0,I,3,0,"div",8)(1,A,3,0),t&2){let e,i=p(2);s(0,(e=i.ForgetForm.get("email"))!=null&&e.getError("required")?0:(e=i.ForgetForm.get("email"))!=null&&e.getError("email")?1:-1)}}function B(t,r){t&1&&c(0,"i",6)}function D(t,r){if(t&1&&(o(0,"div",7)(1,"p",10),d(2),n()()),t&2){let e=p(2);l(2),F(e.Emailmsg)}}function M(t,r){if(t&1){let e=x();o(0,"form",1),w("ngSubmit",function(){g(e);let a=p();return f(a.call())}),o(1,"div",2)(2,"label",3),d(3,"Recover your account"),n(),c(4,"input",4),m(5,G,2,1),o(6,"button",5),d(7,"Submit "),m(8,B,1,0,"i",6),n(),m(9,D,3,1,"div",7),n()()}if(t&2){let e,i=p();u("formGroup",i.ForgetForm),l(5),s(5,(e=i.ForgetForm.get("email"))!=null&&e.errors&&((e=i.ForgetForm.get("email"))!=null&&e.touched)?5:-1),l(),u("disabled",i.ForgetForm.invalid),l(2),s(8,i.isLoading?8:-1),l(),s(9,i.Emailmsg?9:-1)}}function k(t,r){t&1&&(o(0,"div",8)(1,"p",9),d(2,"This Filed Is Required"),n()())}function Y(t,r){t&1&&(o(0,"div",8)(1,"p",9),d(2,"Enter Valid Code"),n()())}function $(t,r){if(t&1&&m(0,k,3,0,"div",8)(1,Y,3,0),t&2){let e,i=p(2);s(0,(e=i.CodeForm.get("resetCode"))!=null&&e.getError("required")?0:(e=i.CodeForm.get("resetCode"))!=null&&e.getError("pattern")?1:-1)}}function j(t,r){t&1&&c(0,"i",6)}function U(t,r){if(t&1&&(o(0,"div",7)(1,"p",10),d(2),n()()),t&2){let e=p(2);l(2),F(e.Codemsg)}}function z(t,r){if(t&1){let e=x();o(0,"form",1),w("ngSubmit",function(){g(e);let a=p();return f(a.call2())}),o(1,"div",2)(2,"label",11),d(3,"Verify Reset Code"),n(),c(4,"input",12),m(5,$,2,1),o(6,"button",5),d(7,"Submit "),m(8,j,1,0,"i",6),n(),m(9,U,3,1,"div",7),n()()}if(t&2){let e,i=p();u("formGroup",i.CodeForm),l(5),s(5,(e=i.CodeForm.get("resetCode"))!=null&&e.errors&&((e=i.CodeForm.get("resetCode"))!=null&&e.touched)?5:-1),l(),u("disabled",i.CodeForm.invalid),l(2),s(8,i.isLoading?8:-1),l(),s(9,i.Codemsg?9:-1)}}function H(t,r){t&1&&(o(0,"div",8)(1,"p",9),d(2,"This Filed Is Required"),n()())}function J(t,r){t&1&&(o(0,"div",8)(1,"p",9),d(2,"Enter Valid Code"),n()())}function K(t,r){if(t&1&&m(0,H,3,0,"div",8)(1,J,3,0),t&2){let e,i=p(2);s(0,(e=i.ResetPasswordForm.get("email"))!=null&&e.getError("required")?0:(e=i.ResetPasswordForm.get("email"))!=null&&e.getError("email")?1:-1)}}function O(t,r){t&1&&(o(0,"div",8)(1,"p",9),d(2,"This Filed Is Required"),n()())}function Q(t,r){t&1&&(o(0,"div",8)(1,"p",9),d(2,"Enter Valid Code"),n()())}function W(t,r){if(t&1&&m(0,O,3,0,"div",8)(1,Q,3,0),t&2){let e,i=p(2);s(0,(e=i.ResetPasswordForm.get("newPassword"))!=null&&e.getError("required")?0:(e=i.ResetPasswordForm.get("newPassword"))!=null&&e.getError("pattern")?1:-1)}}function X(t,r){t&1&&c(0,"i",6)}function Z(t,r){if(t&1&&(o(0,"div",7)(1,"p",10),d(2),n()()),t&2){let e=p(2);l(2),F(e.Restmsg)}}function ee(t,r){if(t&1){let e=x();o(0,"form",1),w("ngSubmit",function(){g(e);let a=p();return f(a.call3())}),o(1,"div",13)(2,"h1"),d(3,"Reset Password"),n(),c(4,"input",14),m(5,K,2,1),n(),o(6,"div",13),c(7,"input",15),m(8,W,2,1),o(9,"button",5),d(10,"Submit "),m(11,X,1,0,"i",6),n(),m(12,Z,3,1,"div",7),n()()}if(t&2){let e,i,a=p();u("formGroup",a.ResetPasswordForm),l(5),s(5,(e=a.ResetPasswordForm.get("email"))!=null&&e.errors&&((e=a.ResetPasswordForm.get("email"))!=null&&e.touched)?5:-1),l(3),s(8,(i=a.ResetPasswordForm.get("newPassword"))!=null&&i.errors&&((i=a.ResetPasswordForm.get("newPassword"))!=null&&i.touched)?8:-1),l(),u("disabled",a.ResetPasswordForm.invalid),l(2),s(11,a.isLoading?11:-1),l(),s(12,a.Restmsg?12:-1)}}var se=(()=>{class t{constructor(){this.isLoading=!1,this.Emailmsg="",this.Codemsg="",this.Restmsg="",this.step=1,this._AuthService=C(S),this._FormBuilder=C(L),this._Router=C(E),this.ForgetForm=this._FormBuilder.group({email:[null,[_.required,_.email]]}),this.CodeForm=this._FormBuilder.group({resetCode:[null,[_.required,_.pattern(/^\w{2,}$/)]]}),this.ResetPasswordForm=this._FormBuilder.group({email:[null,[_.required,_.email]],newPassword:[null,[_.required,_.pattern(/^\w{6,}[@#$]/)]]})}call(){this.isLoading=!0;let e=this.ForgetForm.get("email")?.value;this.ResetPasswordForm.get("email")?.patchValue(e),this._AuthService.VerifyEmail(this.ForgetForm.value).subscribe({next:i=>{console.log(i),this.Emailmsg=i.message,this.isLoading=!1,i.statusMsg==="success"&&(this.step+=1)},error:i=>{console.log(i),this.isLoading=!1}})}call2(){this.isLoading=!0,this._AuthService.VerifyCode(this.CodeForm.value).subscribe({next:e=>{console.log(e),this.Codemsg=e.status,this.isLoading=!1,e.status==="Success"&&(this.step+=1)},error:e=>{console.log(e),this.isLoading=!1}})}call3(){this.isLoading=!0,this._AuthService.ResetPassword(this.ResetPasswordForm.value).subscribe({next:e=>{console.log(e),this.Restmsg=e.message,this.isLoading=!1,localStorage.setItem("userToken",e.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:e=>{console.log(e),this.isLoading=!1}})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=h({type:t,selectors:[["app-forgetpassword"]],standalone:!0,features:[v],decls:3,vars:3,consts:[[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"w-75","mx-auto","shadow-sm","rounded","p-2"],["for","email",1,"my-3","h2"],["formControlName","email","type","email","id","email","placeholder","Email","name","email","required","",1,"form-control"],[1,"btn-main","mt-1","w-25",3,"disabled"],[1,"fa","fa-spin","fa-spinner"],[1,"my-2","w-50"],[1,"alert","alert-danger","w-50","mt-1"],[1,"m-0"],[1,"alert","alert-success"],["for","text",1,"my-3","h2"],["formControlName","resetCode","type","text","id","text","placeholder","Verify Reset Code","name","resetCode","required","",1,"form-control"],[1,"w-75","mx-auto"],["formControlName","email","readonly","","type","email","id","email","placeholder","Enter Your Email","name","email","required","",1,"form-control","my-2"],["formControlName","newPassword","type","password","id","newPassword","placeholder","Enter Your NewPassword","name","newPassword","required","",1,"form-control","my-2"]],template:function(i,a){i&1&&m(0,M,10,5,"form",0)(1,z,10,5,"form",0)(2,ee,13,6,"form",0),i&2&&(s(0,a.step==1?0:-1),l(),s(1,a.step==2?1:-1),l(),s(2,a.step==3?2:-1))},dependencies:[N,y,R,T,b,q,P,V]})}}return t})();export{se as ForgetpasswordComponent};
