import './polyfills.server.mjs';
import{a as M,b as O}from"./chunk-A44ZIRQ5.mjs";import"./chunk-J4BDXTMW.mjs";import{c as V,d as F}from"./chunk-N4GPI5AJ.mjs";import{k as B}from"./chunk-2F7VE6JV.mjs";import{Fc as P,Gb as o,Hb as d,Ib as h,Jb as T,Ka as g,Oa as a,Ob as E,Ub as s,Vb as m,W as _,_ as b,_a as S,ia as C,ib as I,ja as f,ob as k,pb as w,qb as i,rb as n,sb as l,vb as y,xb as u,yb as v}from"./chunk-AK2TQKSJ.mjs";import"./chunk-VVCT4QZE.mjs";var U=(c,x)=>x.product._id;function $(c,x){if(c&1){let e=y();i(0,"div",3)(1,"div",9)(2,"div"),l(3,"img",10),n()(),i(4,"div",11)(5,"div",1)(6,"h6"),o(7),n(),i(8,"h4"),o(9),n(),i(10,"button",12),u("click",function(){let t=C(e).$implicit,p=v();return f(p.DeletItem(t.product._id))}),l(11,"i",13),n()()(),i(12,"div",14)(13,"h4"),o(14),s(15,"currency"),n(),i(16,"div")(17,"div",15)(18,"span",16),u("click",function(){let t=C(e).$implicit,p=v();return f(p.UpdateCount(t.product._id,t.count+1))}),l(19,"i",17),n(),i(20,"h3",18),o(21),n(),i(22,"span",16),u("click",function(){let t=C(e).$implicit,p=v();return f(p.UpdateCount(t.product._id,t.count-1))}),l(23,"i",19),n()()()()()}if(c&2){let e=x.$implicit;a(3),I("src",e.product.imageCover,g),a(4),d(e.product.ratingsAverage),a(2),d(e.product.title),a(5),d(m(15,5,e.price)),a(7),d(e.count)}}var J=(()=>{class c{constructor(){this.cartItems=S({}),this._CartService=_(M),this._Router=_(B),this._ToastrService=_(O)}ngOnInit(){this._CartService.getItems().subscribe({next:e=>{this.cartItems.set(e.data)}})}DeletItem(e){this._CartService.deletItem(e).subscribe({next:r=>{this._CartService.cartNumber.set(r.numOfCartItems),this.cartItems.set(r.data)}})}UpdateCount(e,r){r>0&&this._CartService.UpdateCountNumber(e,r).subscribe({next:t=>{this.cartItems.set(t.data),console.log(t)}})}ClearItems(){this._CartService.ClearAll().subscribe({next:e=>{this.cartItems.set({}),e.message=="success"&&(this._CartService.cartNumber.set(0),this._ToastrService.warning(localStorage.getItem("lang")=="ar"?"\u062A\u0645 \u0645\u0633\u062D \u062C\u0645\u064A\u0639 \u0627\u0644\u0639\u0646\u0627\u0635\u0631":"All items have been deleted"))}})}gotopay(e){this._Router.navigate(["/orders",e])}static{this.\u0275fac=function(r){return new(r||c)}}static{this.\u0275cmp=b({type:c,selectors:[["app-cart"]],standalone:!0,features:[E],decls:25,vars:18,consts:[[1,"container"],[1,"text-center"],[1,"d-flex","justify-content-between"],[1,"row","align-items-center","border-bottom"],[1,"w-100","d-flex","justify-content-between"],[1,"btn","btn-main","mt-2",3,"click"],[1,"fa-solid","fa-sack-dollar"],[1,"clear","btn","btn-danger","mt-2",3,"click"],[1,"fa-solid","fa-snowplow"],[1,"col-md-2","py-2"],["alt","pho",1,"w-75","h-50","border-1","rounded-5",3,"src"],[1,"col-md-8"],[1,"btn","btn-danger","p-1",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"col-md-2","text-end"],[1,"d-flex","align-items-center","justify-content-end"],[3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],[1,"p-1"],[1,"fa-solid","fa-circle-minus","fa-xl"]],template:function(r,t){r&1&&(i(0,"section")(1,"div",0)(2,"h1",1),o(3),s(4,"translate"),n(),i(5,"div",2)(6,"h4"),o(7),s(8,"translate"),s(9,"currency"),n(),i(10,"span"),o(11),s(12,"translate"),n()(),l(13,"hr"),k(14,$,24,7,"div",3,U),i(16,"div",4)(17,"button",5),u("click",function(){return t.gotopay(t.cartItems()._id)}),o(18),s(19,"translate"),l(20,"i",6),n(),i(21,"button",7),u("click",function(){return t.ClearItems()}),o(22),s(23,"translate"),l(24,"i",8),n()()()()),r&2&&(a(3),d(m(4,6,"cart.Shopping Cart")),a(4),T("",m(8,8,"cart.Total Price")," :",m(9,10,t.cartItems().totalCartPrice),""),a(4),d(m(12,12,"cart.Price")),a(3),w(t.cartItems().products),a(4),h("",m(19,14,"cart.Go to Payment")," "),a(4),h("",m(23,16,"cart.Clear All")," "))},dependencies:[P,F,V],styles:["[_ngcontent-%COMP%]:root{--main-color: #00c2c2}span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--main-color);cursor:pointer}"]})}}return c})();export{J as CartComponent};
